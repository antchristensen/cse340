<h1><%= title %></h1>

<%- messages() %>

<% if (errors) { %>
  <ul class="notice">
    <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
    <% }) %>
  </ul>
<% } %>

<!-- Account Update Form -->
<section>
  <h2>Update Account Information</h2>
  <form action="/account/update" method="post" class="account-form">
    <!-- Hidden account ID -->
    <input type="hidden" name="account_id" value="<%= accountData.account_id %>">

    <!-- First Name -->
    <label for="account_firstname">First Name</label>
    <input 
      type="text" 
      id="account_firstname" 
      name="account_firstname" 
      value="<%= typeof account_firstname !== 'undefined' ? account_firstname : accountData.account_firstname %>" 
      required
    >

    <!-- Last Name -->
    <label for="account_lastname">Last Name</label>
    <input 
      type="text" 
      id="account_lastname" 
      name="account_lastname" 
      value="<%= typeof account_lastname !== 'undefined' ? account_lastname : accountData.account_lastname %>" 
      required
    >

    <!-- Email -->
    <label for="account_email">Email Address</label>
    <input 
      type="email" 
      id="account_email" 
      name="account_email" 
      value="<%= typeof account_email !== 'undefined' ? account_email : accountData.account_email %>" 
      required
    >

    <!-- Submit -->
    <input type="submit" value="Update Account">
  </form>
</section>

<!-- Change Password Form -->
<section>
  <h2>Change Password</h2>
  <p>
    Entering a new password here will replace your current password. 
    Password must be at least 12 characters long and include at least 
    one uppercase letter, one lowercase letter, one number, and one special character.
  </p>

  <form action="/account/change-password" method="post" class="account-form">
    <!-- Hidden account ID -->
    <input type="hidden" name="account_id" value="<%= accountData.account_id %>">

    <!-- New Password -->
    <label for="account_password">New Password</label>
    <input 
      type="password" 
      id="account_password" 
      name="account_password" 
      required
      minlength="12"
      pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{12,}$"
      title="Password must be at least 12 characters long, include uppercase, lowercase, number, and special character."
    >

    <!-- Submit -->
    <input type="submit" value="Change Password">
  </form>
</section>
